"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[33083],{105737:(e,t,r)=>{function i(e,t,r){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(!l(e[i],t[i],r+1))return!1;return!0}function s(e,t,r){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(!(i in t)||!l(e[i],t[i],r+1))return!1;return!0}function l(e,t,r){if(r>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let l=Object.prototype.toString.call(e);if(l!==Object.prototype.toString.call(t))return!1;switch(l){case"[object Array]":return i(e,t,r);case"[object Set]":return i(Array.from(e).sort(),Array.from(t).sort(),r);case"[object Object]":case"[object Arguments]":return s(e,t,r);case"[object Map]":return s(Object.fromEntries(e),Object.fromEntries(t),r);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function n(e,t){return l(e,t,0)}r.d(t,{ZP:()=>n,qP:()=>i})},510989:(e,t,r)=>{r.d(t,{Z:()=>i});let i=r(103322).Z},201417:(e,t,r)=>{r.d(t,{Z:()=>i});function i(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}},483085:(e,t,r)=>{r.d(t,{Z:()=>function e(t,r=!1){return s=>{if(!(0,i.Z)(s))return r&&Array.isArray(s)?s.map(e(t,r)):s;let l={};return Object.keys(s).forEach(n=>{let a=t(s[n],n);(0,i.Z)(s[n])||r&&Array.isArray(s[n])?l[a]=e(t,r)(s[n]):l[a]=s[n]}),l}}});var i=r(201417)},256683:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(483085);function s(e,t=!1){let r=(t,r)=>e(r);return e=>(0,i.Z)(r,t)(e)}},493538:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(760890),s=r(667294),l=r(107860),n=r(906623),a=r(438555);function u({children:e,isAtEndOfFeed:t,pinData:r,itemCount:u,includeBackgroundImages:o=!1,includeVideos:c=!1,includeSections:d=!1,isPlaceholderGrid:f}){return a.Z()?.isAuthenticated||(d=!0),(0,i.Z)({pinData:r,isAtEndOfFeed:t,includeBackgroundImages:o,includeVideos:c,includeSections:d,isPlaceholderGrid:f}),!function(e){let t=(0,n.E)(),r=(0,s.useRef)(null);(0,s.useEffect)(()=>{e!==r.current&&(r.current=e,t&&(0,l.ZP)(l.at))},[!!t,e])}(u),e}},760890:(e,t,r)=>{r.d(t,{Z:()=>b,v:()=>p});var i=r(667294),s=r(685679),l=r(608029),n=r(367180),a=r(297329),u=r(107860),o=r(906623),c=r(279600),d=r(748058);let f=(0,l.XV)("GridProfiler"),p=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,n.VZ)(),m=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,h=(e,t)=>{if(!t){let t=(0,n.LM)();if(t===e)return f("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,n.F9)())return f("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},y=(e,t)=>{let r=0,i=0,s=0,l=0,n=0;return e=e.filter(e=>"pin"===e.type),t.forEach((t,a)=>{let u;let o=t.fileName.split(".")[0];u=e[a],o!==u?.image_signature&&(u=e.find(e=>o===e?.image_signature)),void 0===u?n+=1:u.is_promoted||u.recommendation_reason?.reason==="PROMOTED_PIN"||u?.promoter?.length?s+=1:null!==u.story_pin_data_id&&void 0!==u.story_pin_data_id?r+=1:u?.videos?.video_list?i+=1:l+=1}),{storyPinCount:r,videoCount:i,adCount:s,imageCount:l,unknownCount:n}},A=(e,t)=>{let r=()=>{window.removeEventListener(e,r),t()};return window.addEventListener(e,r),()=>window.removeEventListener(e,r)};function b({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:r,includeVideos:p=!1,includeSections:b,isPlaceholderGrid:E}){let _=(0,o.E)(),g=_?.getId(),I=_?.setVisuallyCompleteResult,[v,O]=(0,i.useState)({status:"DISABLED"});(0,i.useEffect)(()=>{I?O({status:"LAYOUT",failedCount:0,numOfItemsChecked:0}):O({status:"DISABLED"})},[g,I]),(0,i.useEffect)(()=>{if("DISABLED"!==v.status&&(0,u.ZP)(`GridVisuallyCompleteProfiler_${v.status}`),f("new status",v),"LAYOUT"===v.status){let e=A("scroll",()=>{(0,u.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[v.status]),(0,d.Z)(()=>{if(!_||!I)return;let{abort:i,getMetricId:u}=_,o=u(),d=(0,n.cQ)(r,p,b);if(E&&!d.length){f("bypassing PWT run due to skeleton pin grid");return}switch(v.status){case"LAYOUT":{let t=h(v.numOfItemsChecked,e);t.complete?O({status:"TIMING",failedCount:0,pinElements:d}):500*v.failedCount>6e4?((0,a.A9)(`images.${(0,s.KJ)(o)}.visuallyComplete.maxLayoutAttempt`),i("visuallyComplete_layoutTimeout"),O({status:"DISABLED"})):O({...v,failedCount:v.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,c.Cg)(),r=v.pinElements.length,n=[],u=0,d=0,p=0;if(v.pinElements.forEach(({element:t,fileName:r})=>{let i=e.find(e=>e.name.endsWith(r));i?i.responseEnd?(n.push(i),(0,l.v5)(t,"green")):(p+=1,(0,l.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(d+=1,(0,l.v5)(t,"red")):(u+=1,(0,l.v5)(t,"greenyellow"))}),u||p)100*v.failedCount>6e4?((0,a.A9)(`images.${(0,s.KJ)(o)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:r,incompleteCount:u,noTimingCount:d,noTimingResponseEndCount:p}}),i("visuallyComplete_timingTimeout"),O({status:"DISABLED"})):O({...v,failedCount:v.failedCount+1});else{if(f(`All ${n.length} images are fetched`),t&&t.length){let e=y(t,v.pinElements);Object.entries(e).forEach(([e,t])=>{_.addBinaryAnnotation(e,t,"I16")}),(0,a.A9)(`${(0,s.KJ)(o)}.pinTypes`,{tags:e})}I({imageTimings:n}),O({status:"DISABLED"}),(0,a.A9)(`images.${(0,s.KJ)(o)}.visuallyComplete.complete`,{tags:{totalImageCount:r,noTimingCount:d}})}}}},m(v))}},325362:(e,t,r)=>{r.d(t,{Z:()=>i});function i(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}},748058:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(667294);let s=(e,t)=>{let r=(0,i.useRef)(()=>{});(0,i.useEffect)(()=>{r.current=e},[e]),(0,i.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>r.current(),t);return()=>clearInterval(e)},[t])}},446653:(e,t,r)=>{r.d(t,{r:()=>E,K:()=>b});var i=r(667294),s=r(342513),l=r(757640),n=r(149722),a=r(998577),u=r(573810),o=r(325362);let c=e=>{let t={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&("object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?t[(0,o.Z)(r)]=e[r]:t[(0,o.Z)(r)]=c(e[r]));return t},d=(e,t)=>{let r=[];for(let i in e)i!==t&&r.push({id:i,...c(e[i])});let i=r.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),s=new Map;for(let e of i)s.set(e.id,e);return s},f={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},p=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},m=({dispatch:e,isEnabled:t,state:r})=>{let{orbacVisibility:s,disableProfileChanger:l,headerVisible:n}=r,a=(0,i.useCallback)(r=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:r})},[t,e]);return{changeProfile:a,toggleORBACVisibility:(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:r??!s})},[t,e,s]),toggleDisableProfileChanger:(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:r??!l})},[t,e,l]),toggleHeaderVisibility:(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:r??!n})},[t,e,n])}},h=e=>{let[t,r]=(0,i.useReducer)(p,f),s=m({dispatch:r,isEnabled:e,state:t}),{activeProfile:l,orbacVisibility:n}=t;return(0,i.useEffect)(()=>{let e=(0,u.qn)("orbacActiveProfile",!1);e&&r({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,u.qn)("orbacVisibilty",!1);e&&r({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,u.Nh)("orbacVisibility",n)},[n]),(0,i.useEffect)(()=>{(0,u.Nh)("orbacActiveProfile",l)},[l]),{state:t,actions:s,receiveProfiles:(0,i.useCallback)((e,t)=>{r({type:"LOAD_PROFILES",payload:d(e,t)})},[r])}};var y=r(785893);let{Provider:A,useMaybeHook:b}=(0,s.Z)("RoleBasedAccessControlContext"),E=({children:e})=>{let t;let r=(0,n.Z)(),s=!!(r.isAuth&&r.isPartner),{state:u,actions:o,receiveProfiles:c}=h(s),{activeProfile:d,headerVisible:f,profiles:p=[]}=u,m=p?Array.from(p.values()):[],b=(0,a.Z)(m),E=!!r.isAuth&&m.length>0&&b,_=r.isAuth?r.id:"",g=r.isAuth?r.username:"",{changeProfile:I,toggleORBACVisibility:v,toggleDisableProfileChanger:O,toggleHeaderVisibility:L}=o;(0,i.useEffect)(()=>{if(s){if("string"==typeof b){I(b);return}d||I(_)}},[b,_,s,I,d]),(0,i.useEffect)(()=>{s&&(E&&!f&&L(!0),!E&&f&&L(!1))},[L,E,s,f,p]);let{data:C}=(0,l.Z)(s?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),P=C?.profiles;r&&r.isAuth&&u.activeProfile===r.id?t={id:r.id,permissions:["OWNER"],user:{username:g,businessName:r.fullName,imgUrl:r.imageSmallUrl}}:d&&u.profiles&&(t=u.profiles.get(d)),(0,i.useEffect)(()=>{P&&c(P,_)},[c,P,_]);let j=u.profiles?Array.from(u.profiles.values()):[];return(0,y.jsx)(A,{value:{profiles:j,headerVisible:u.headerVisible,activeProfile:t,changeProfile:I,toggleORBACVisibility:v,toggleDisableProfileChanger:O,toggleHeaderVisibility:L},children:e})}},785059:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(340523),s=r(446653),l=r(998577);let n=()=>{let{checkExperiment:e}=(0,i.F)(),t=(0,s.K)(),{activeProfile:r}=t||{},n=(0,l.Z)(t?.profiles||[]),{anyEnabled:a}=e("useorbacroutematcher_in_useorbacactingas");return a&&!n?Object.freeze({}):r&&(r.viewerMeetsMfaRequirement||(r.permissions||[]).includes("OWNER"))?r:Object.freeze({})}},998577:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(616550),s=r(741983),l=r(149722),n=r(19447);let a=e=>{let t=(0,i.TH)(),r=(0,l.Z)(),a=(0,n.S6)(),u=(0,i.$B)("/:username"),o=u?.params?.username,c=(0,i.$B)("/pin/:id"),d=!!c?.params?.id&&a(c.params.id)?.pinner?.id;if((0,s.ej)(t))return!1;if((0,s.RU)(t)||(0,s.mY)(t))return!0;let f=e.concat(r.isAuth?{user:{username:r.username},id:r.id}:{}).find(e=>{let{user:t={},id:r}=e||{},{username:i}=t;return(!!i&&!!o||!!d&&!!r)&&(i===o||d===r)});return!!f&&f.id}},199677:(e,t,r)=>{r.d(t,{D3:()=>d,DX:()=>o,Fk:()=>i,KY:()=>f,Ms:()=>s,N1:()=>p,_P:()=>u,gJ:()=>l,lJ:()=>a,nl:()=>n,q6:()=>c});let i=(e,t)=>{let r=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(r=t.user.businessName),r},s=(e,t)=>{let r=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(r=t.user.username),r},l=(e,t)=>{let r=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(r=t.user.imgUrl),r},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),a=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",u=(e,t,r)=>r&&r.user&&t&&t.isAuth&&r.id!==t.id?r.user.merchantId:e.advertiser?.merchant_id,o=(e,t,r)=>r&&r.user&&e.isAuth&&r.id!==e.id?r.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,c=(e,t,r)=>!!(e&&e.isAuth&&r&&r.id&&r.id!==e.id&&r.id===t),d=(e,t,r)=>!!(c(e,t,r)||e&&e.isAuth&&t===e.id),f=(e,t,r)=>d(e,t&&t.owner&&t.owner.id||"",r);function p(e,t,r){return d(e,t?t.id:"",r)}},875936:(e,t,r)=>{r.d(t,{PJ:()=>a,Zu:()=>n,c6:()=>l,mM:()=>s});var i=r(883119);let s=new i.Ry(1),l=new i.H3([s]),n=new i.H3([l]),a=new i.H3([n])},94816:(e,t,r)=>{r.d(t,{Z:()=>f,o:()=>d});var i=r(667294),s=r(883119),l=r(587703),n=r(515278),a=r(213377),u=r(140017),o=r(149722),c=r(785893);let d="AddPinRep";function f({ctaText:e,handleClick:t,height:r,iconSize:d,textSize:f,component:p}){let m=(0,l.Z)(),h=(0,u.ZP)(),y=(0,o.Z)(),A=(0,n.Z)();return(0,i.useEffect)(()=>{m({event_type:120,component:p??0,element:10643})},[m,p]),(0,c.jsx)(s.xu,{children:(0,c.jsx)(s.Tg,{href:"/pin-builder/",onTap:()=>{if(A){A();return}y.isPartner&&m({event_type:101,component:0,element:10643}),t&&t()},children:(0,c.jsxs)(s.st,{children:[(0,c.jsx)(s.xu,{alignItems:"center",color:"secondary",display:"flex",fit:!0,height:r||a.yF,justifyContent:"center",rounding:2,width:r||void 0,children:(0,c.jsx)(s.xu,{color:"default",height:d||40,rounding:"circle",width:d||40,children:(0,c.jsx)(s.JO,{accessibilityLabel:"",color:"error",icon:"add-circle",inline:!0,size:d||40})})}),(0,c.jsx)(s.xu,{padding:2,children:(0,c.jsx)(s.xv,{color:"subtle",size:f||"300",weight:"bold",children:e||h._('Create Pin', 'label to open create pin modal', 'label to open create pin modal')})})]})})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/33083-4e8d4eab1265f00e.mjs.map